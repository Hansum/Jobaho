{"ast":null,"code":"// import { combineData } from \"../../../entry\";\n// export default async (req, res) => {\n//   // res.status(200).json(combineData);\n//   console.log(\"Combine data:\", combineData);\n//   return res.json({ result: \"hello next\" });\n// };\nconst axios = require(\"axios\");\n\nconst cheerio = require(\"cheerio\");\n\nconst loadWebsite = async () => {\n  const url = \"https://www.mynimo.com/cebu/it-jobs/no-experience-jobs\";\n  const result = await axios.get(url);\n  return cheerio.load(result.data);\n};\n\nconst fetchDatafromWebsite = async () => {\n  const $ = await loadWebsite();\n  const Job_title = [];\n  const Company_name = [];\n  const location = [];\n  const Job_url = [];\n  $('div[id=\"job-browse-card\"]').find(\"div > div > div > a\").each(function (index, element) {\n    Job_title.push($(element).text());\n  });\n  $('div[id=\"job-browse-card\"]').find(\"div > div > div > div > span > .verified-employer-new-info\").each(function (index, element) {\n    Company_name.push($(element).text());\n  });\n  $('div[id=\"job-browse-card\"]').find(\".job-browse-card-element > .four > .item-style2\").each(function (index, element) {\n    location.push($(element).text());\n  });\n  $('div[id=\"job-browse-card\"]').find(\"a\").each(function (index, element) {\n    Job_url.push($(element).attr(\"href\"));\n  });\n  return {\n    Job_title,\n    Company_name,\n    Job_url\n  };\n};\n\nexport default (async (req, res) => {\n  const fetchData = await fetchDatafromWebsite(); // const data = [];\n  // for (let i = 0; i <= fetchData.Job_title.length; i++) {\n  //   data.push({\n  //     job_position: fetchData.Job_title[i],\n  //     company: fetchData.Company_name[i],\n  //     location: fetchData.location[i],\n  //     url: fetchData.Job_url[i],\n  //   });\n  // }\n\n  if (data !== undefined || data != 0) {\n    console.log(\"Data from entry:\", data);\n    return res.json({\n      result: fetchData\n    });\n  }\n});","map":{"version":3,"sources":["C:/Users/chris/Desktop/jobaho/pages/api/job/index.js"],"names":["axios","require","cheerio","loadWebsite","url","result","get","load","data","fetchDatafromWebsite","$","Job_title","Company_name","location","Job_url","find","each","index","element","push","text","attr","req","res","fetchData","undefined","console","log","json"],"mappings":"AAAA;AAEA;AACA;AACA;AACA;AACA;AACA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AAEA,MAAME,WAAW,GAAG,YAAY;AAC9B,QAAMC,GAAG,GAAG,wDAAZ;AACA,QAAMC,MAAM,GAAG,MAAML,KAAK,CAACM,GAAN,CAAUF,GAAV,CAArB;AACA,SAAOF,OAAO,CAACK,IAAR,CAAaF,MAAM,CAACG,IAApB,CAAP;AACD,CAJD;;AAMA,MAAMC,oBAAoB,GAAG,YAAY;AACvC,QAAMC,CAAC,GAAG,MAAMP,WAAW,EAA3B;AACA,QAAMQ,SAAS,GAAG,EAAlB;AACA,QAAMC,YAAY,GAAG,EAArB;AACA,QAAMC,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AAEAJ,EAAAA,CAAC,CAAC,2BAAD,CAAD,CACGK,IADH,CACQ,qBADR,EAEGC,IAFH,CAEQ,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC9BP,IAAAA,SAAS,CAACQ,IAAV,CAAeT,CAAC,CAACQ,OAAD,CAAD,CAAWE,IAAX,EAAf;AACD,GAJH;AAMAV,EAAAA,CAAC,CAAC,2BAAD,CAAD,CACGK,IADH,CACQ,4DADR,EAEGC,IAFH,CAEQ,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC9BN,IAAAA,YAAY,CAACO,IAAb,CAAkBT,CAAC,CAACQ,OAAD,CAAD,CAAWE,IAAX,EAAlB;AACD,GAJH;AAMAV,EAAAA,CAAC,CAAC,2BAAD,CAAD,CACGK,IADH,CACQ,iDADR,EAEGC,IAFH,CAEQ,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC9BL,IAAAA,QAAQ,CAACM,IAAT,CAAcT,CAAC,CAACQ,OAAD,CAAD,CAAWE,IAAX,EAAd;AACD,GAJH;AAMAV,EAAAA,CAAC,CAAC,2BAAD,CAAD,CACGK,IADH,CACQ,GADR,EAEGC,IAFH,CAEQ,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC9BJ,IAAAA,OAAO,CAACK,IAAR,CAAaT,CAAC,CAACQ,OAAD,CAAD,CAAWG,IAAX,CAAgB,MAAhB,CAAb;AACD,GAJH;AAMA,SAAO;AAAEV,IAAAA,SAAF;AAAaC,IAAAA,YAAb;AAA2BE,IAAAA;AAA3B,GAAP;AACD,CAhCD;;AAkCA,gBAAe,OAAOQ,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAMC,SAAS,GAAG,MAAMf,oBAAoB,EAA5C,CADiC,CAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAID,IAAI,KAAKiB,SAAT,IAAsBjB,IAAI,IAAI,CAAlC,EAAqC;AACnCkB,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCnB,IAAhC;AACA,WAAOe,GAAG,CAACK,IAAJ,CAAS;AAAEvB,MAAAA,MAAM,EAAEmB;AAAV,KAAT,CAAP;AACD;AACF,CAhBD","sourcesContent":["// import { combineData } from \"../../../entry\";\r\n\r\n// export default async (req, res) => {\r\n//   // res.status(200).json(combineData);\r\n//   console.log(\"Combine data:\", combineData);\r\n//   return res.json({ result: \"hello next\" });\r\n// };\r\nconst axios = require(\"axios\");\r\nconst cheerio = require(\"cheerio\");\r\n\r\nconst loadWebsite = async () => {\r\n  const url = \"https://www.mynimo.com/cebu/it-jobs/no-experience-jobs\";\r\n  const result = await axios.get(url);\r\n  return cheerio.load(result.data);\r\n};\r\n\r\nconst fetchDatafromWebsite = async () => {\r\n  const $ = await loadWebsite();\r\n  const Job_title = [];\r\n  const Company_name = [];\r\n  const location = [];\r\n  const Job_url = [];\r\n\r\n  $('div[id=\"job-browse-card\"]')\r\n    .find(\"div > div > div > a\")\r\n    .each(function (index, element) {\r\n      Job_title.push($(element).text());\r\n    });\r\n\r\n  $('div[id=\"job-browse-card\"]')\r\n    .find(\"div > div > div > div > span > .verified-employer-new-info\")\r\n    .each(function (index, element) {\r\n      Company_name.push($(element).text());\r\n    });\r\n\r\n  $('div[id=\"job-browse-card\"]')\r\n    .find(\".job-browse-card-element > .four > .item-style2\")\r\n    .each(function (index, element) {\r\n      location.push($(element).text());\r\n    });\r\n\r\n  $('div[id=\"job-browse-card\"]')\r\n    .find(\"a\")\r\n    .each(function (index, element) {\r\n      Job_url.push($(element).attr(\"href\"));\r\n    });\r\n\r\n  return { Job_title, Company_name, Job_url };\r\n};\r\n\r\nexport default async (req, res) => {\r\n  const fetchData = await fetchDatafromWebsite();\r\n  // const data = [];\r\n  // for (let i = 0; i <= fetchData.Job_title.length; i++) {\r\n  //   data.push({\r\n  //     job_position: fetchData.Job_title[i],\r\n  //     company: fetchData.Company_name[i],\r\n  //     location: fetchData.location[i],\r\n  //     url: fetchData.Job_url[i],\r\n  //   });\r\n  // }\r\n\r\n  if (data !== undefined || data != 0) {\r\n    console.log(\"Data from entry:\", data);\r\n    return res.json({ result: fetchData });\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}